<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deposition Digest - Upload Transcript</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1>Deposition Digest</h1>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="upload-section">
            <div class="container">
                <div class="upload-content">
                    <h2>Upload Deposition Transcript</h2>
                    <p class="upload-description">Upload your deposition transcript file to generate an AI-powered summary.</p>
                    <p class="folder-hint">ðŸ’¡ Tip: Your transcripts are stored in the <strong>Transcripts</strong> folder</p>
                    
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">ðŸ“„</div>
                        <h3>Drag and drop your file here</h3>
                        <p>or</p>
                        <label for="fileInput" class="btn btn-primary">Choose File</label>
                        <input type="file" id="fileInput" accept=".txt,.pdf,.doc,.docx" style="display: none;">
                        <p class="file-info">Supported formats: TXT, PDF, DOC, DOCX</p>
                    </div>

                    <div class="file-preview" id="filePreview" style="display: none;">
                        <div class="file-preview-content">
                            <div class="file-icon">ðŸ“„</div>
                            <div class="file-details">
                                <h4 id="fileName"></h4>
                                <p id="fileSize"></p>
                            </div>
                            <button class="btn-remove" id="removeFile">Ã—</button>
                        </div>
                        <button class="btn btn-primary btn-upload" id="uploadBtn">Upload and Summarize</button>
                    </div>

                    <div class="upload-progress" id="uploadProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <p class="progress-text">Uploading and processing...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const filePreview = document.getElementById('filePreview');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const removeFile = document.getElementById('removeFile');
        const uploadBtn = document.getElementById('uploadBtn');
        const uploadProgress = document.getElementById('uploadProgress');
        const progressFill = document.getElementById('progressFill');

        // Click to select file
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('drag-over');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('drag-over');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        // File input change
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        // Handle file selection
        function handleFile(file) {
            // Validate file type
            const validTypes = ['text/plain', 'application/pdf', 'application/msword', 
                              'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            const validExtensions = ['.txt', '.pdf', '.doc', '.docx'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (!validTypes.includes(file.type) && !validExtensions.includes(fileExtension)) {
                alert('Please upload a valid file format (TXT, PDF, DOC, or DOCX)');
                return;
            }

            // Display file info
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            uploadArea.style.display = 'none';
            filePreview.style.display = 'block';
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Remove file
        removeFile.addEventListener('click', () => {
            fileInput.value = '';
            uploadArea.style.display = 'block';
            filePreview.style.display = 'none';
        });

        // Upload button
        uploadBtn.addEventListener('click', () => {
            if (!fileInput.files.length) return;
            
            filePreview.style.display = 'none';
            uploadProgress.style.display = 'block';
            
            // Simulate upload progress (replace with actual upload logic)
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressFill.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    // Here you would typically send the file to your backend
                    // For now, we'll just show a message
                    setTimeout(() => {
                        alert('File uploaded successfully! Summary generation will be implemented next.');
                        uploadProgress.style.display = 'none';
                        uploadArea.style.display = 'block';
                        fileInput.value = '';
                    }, 500);
                }
            }, 200);
        });
    </script>
</body>
</html>

